{"remainingRequest":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/babel-loader/lib/index.js!/Users/serhiirez/Downloads/auth-11-finished/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/serhiirez/Downloads/auth-11-finished/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/serhiirez/Downloads/auth-11-finished/src/pages/auth/UserAuth.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/serhiirez/Downloads/auth-11-finished/src/pages/auth/UserAuth.vue","mtime":1598448844000},{"path":"/Users/serhiirez/Downloads/auth-11-finished/babel.config.js","mtime":1598437344000},{"path":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbWFpbDogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgZm9ybUlzVmFsaWQ6IHRydWUsCiAgICAgIG1vZGU6ICdsb2dpbicsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGVycm9yOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHN1Ym1pdEJ1dHRvbkNhcHRpb24oKSB7CiAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdsb2dpbicpIHsKICAgICAgICByZXR1cm4gJ0xvZ2luJzsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJ1NpZ251cCc7CiAgICAgIH0KICAgIH0sCiAgICBzd2l0Y2hNb2RlQnV0dG9uQ2FwdGlvbigpIHsKICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ2xvZ2luJykgewogICAgICAgIHJldHVybiAnU2lnbnVwIGluc3RlYWQnOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnTG9naW4gaW5zdGVhZCc7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHRoaXMuZm9ybUlzVmFsaWQgPSB0cnVlOwogICAgICBpZiAodGhpcy5lbWFpbCA9PT0gJycgfHwgIXRoaXMuZW1haWwuaW5jbHVkZXMoJ0AnKSB8fCB0aGlzLnBhc3N3b3JkLmxlbmd0aCA8IDYpIHsKICAgICAgICB0aGlzLmZvcm1Jc1ZhbGlkID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgY29uc3QgYWN0aW9uUGF5bG9hZCA9IHsKICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZAogICAgICB9OwogICAgICB0cnkgewogICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdsb2dpbicpIHsKICAgICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdsb2dpbicsIGFjdGlvblBheWxvYWQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2lnbnVwJywgYWN0aW9uUGF5bG9hZCk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHJlZGlyZWN0VXJsID0gJy8nICsgKHRoaXMuJHJvdXRlLnF1ZXJ5LnJlZGlyZWN0IHx8ICdjb2FjaGVzJyk7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UocmVkaXJlY3RVcmwpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICB0aGlzLmVycm9yID0gZXJyLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBhdXRoZW50aWNhdGUsIHRyeSBsYXRlci4nOwogICAgICB9CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICB9LAogICAgc3dpdGNoQXV0aE1vZGUoKSB7CiAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdsb2dpbicpIHsKICAgICAgICB0aGlzLm1vZGUgPSAnc2lnbnVwJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1vZGUgPSAnbG9naW4nOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlRXJyb3IoKSB7CiAgICAgIHRoaXMuZXJyb3IgPSBudWxsOwogICAgfQogIH0KfTs="},{"version":3,"mappings":"AA6BA,eAAe;EACbA,IAAI,GAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAE,IAAI;MACjBC,IAAI,EAAE,OAAO;MACbC,SAAS,EAAE,KAAK;MAChBC,KAAK,EAAE;IACT,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,mBAAmB,GAAG;MACpB,IAAI,IAAI,CAACJ,IAAG,KAAM,OAAO,EAAE;QACzB,OAAO,OAAO;MAChB,OAAO;QACL,OAAO,QAAQ;MACjB;IACF,CAAC;IACDK,uBAAuB,GAAG;MACxB,IAAI,IAAI,CAACL,IAAG,KAAM,OAAO,EAAE;QACzB,OAAO,gBAAgB;MACzB,OAAO;QACL,OAAO,eAAe;MACxB;IACF;EACF,CAAC;EACDM,OAAO,EAAE;IACP,MAAMC,UAAU,GAAG;MACjB,IAAI,CAACR,WAAU,GAAI,IAAI;MACvB,IACE,IAAI,CAACF,KAAI,KAAM,EAAC,IAChB,CAAC,IAAI,CAACA,KAAK,CAACW,QAAQ,CAAC,GAAG,KACxB,IAAI,CAACV,QAAQ,CAACW,MAAK,GAAI,GACvB;QACA,IAAI,CAACV,WAAU,GAAI,KAAK;QACxB;MACF;MAEA,IAAI,CAACE,SAAQ,GAAI,IAAI;MAErB,MAAMS,aAAY,GAAI;QACpBb,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBC,QAAQ,EAAE,IAAI,CAACA;MACjB,CAAC;MAED,IAAI;QACF,IAAI,IAAI,CAACE,IAAG,KAAM,OAAO,EAAE;UACzB,MAAM,IAAI,CAACW,MAAM,CAACC,QAAQ,CAAC,OAAO,EAAEF,aAAa,CAAC;QACpD,OAAO;UACL,MAAM,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,QAAQ,EAAEF,aAAa,CAAC;QACrD;QACA,MAAMG,WAAU,GAAI,GAAE,IAAK,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,QAAO,IAAK,SAAS,CAAC;QACnE,IAAI,CAACC,OAAO,CAACC,OAAO,CAACL,WAAW,CAAC;MACnC,EAAE,OAAOM,GAAG,EAAE;QACZ,IAAI,CAACjB,KAAI,GAAIiB,GAAG,CAACC,OAAM,IAAK,oCAAoC;MAClE;MAEA,IAAI,CAACnB,SAAQ,GAAI,KAAK;IACxB,CAAC;IACDoB,cAAc,GAAG;MACf,IAAI,IAAI,CAACrB,IAAG,KAAM,OAAO,EAAE;QACzB,IAAI,CAACA,IAAG,GAAI,QAAQ;MACtB,OAAO;QACL,IAAI,CAACA,IAAG,GAAI,OAAO;MACrB;IACF,CAAC;IACDsB,WAAW,GAAG;MACZ,IAAI,CAACpB,KAAI,GAAI,IAAI;IACnB;EACF;AACF,CAAC","names":["data","email","password","formIsValid","mode","isLoading","error","computed","submitButtonCaption","switchModeButtonCaption","methods","submitForm","includes","length","actionPayload","$store","dispatch","redirectUrl","$route","query","redirect","$router","replace","err","message","switchAuthMode","handleError"],"sourceRoot":"","sources":["/Users/serhiirez/Downloads/auth-11-finished/src/pages/auth/UserAuth.vue"],"sourcesContent":["<template>\n  <div>\n    <base-dialog :show=\"!!error\" title=\"An error occurred\" @close=\"handleError\">\n      <p>{{ error }}</p>\n    </base-dialog>\n    <base-dialog :show=\"isLoading\" title=\"Authenticating...\" fixed>\n      <base-spinner></base-spinner>\n    </base-dialog>\n    <base-card>\n      <form @submit.prevent=\"submitForm\">\n        <div class=\"form-control\">\n          <label for=\"email\">E-Mail</label>\n          <input type=\"email\" id=\"email\" v-model.trim=\"email\" />\n        </div>\n        <div class=\"form-control\">\n          <label for=\"password\">Password</label>\n          <input type=\"password\" id=\"password\" v-model.trim=\"password\" />\n        </div>\n        <p\n          v-if=\"!formIsValid\"\n        >Please enter a valid email and password (must be at least 6 characters long).</p>\n        <base-button>{{ submitButtonCaption }}</base-button>\n        <base-button type=\"button\" mode=\"flat\" @click=\"switchAuthMode\">{{ switchModeButtonCaption }}</base-button>\n      </form>\n    </base-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      email: '',\n      password: '',\n      formIsValid: true,\n      mode: 'login',\n      isLoading: false,\n      error: null,\n    };\n  },\n  computed: {\n    submitButtonCaption() {\n      if (this.mode === 'login') {\n        return 'Login';\n      } else {\n        return 'Signup';\n      }\n    },\n    switchModeButtonCaption() {\n      if (this.mode === 'login') {\n        return 'Signup instead';\n      } else {\n        return 'Login instead';\n      }\n    },\n  },\n  methods: {\n    async submitForm() {\n      this.formIsValid = true;\n      if (\n        this.email === '' ||\n        !this.email.includes('@') ||\n        this.password.length < 6\n      ) {\n        this.formIsValid = false;\n        return;\n      }\n\n      this.isLoading = true;\n\n      const actionPayload = {\n        email: this.email,\n        password: this.password,\n      };\n\n      try {\n        if (this.mode === 'login') {\n          await this.$store.dispatch('login', actionPayload);\n        } else {\n          await this.$store.dispatch('signup', actionPayload);\n        }\n        const redirectUrl = '/' + (this.$route.query.redirect || 'coaches');\n        this.$router.replace(redirectUrl);\n      } catch (err) {\n        this.error = err.message || 'Failed to authenticate, try later.';\n      }\n\n      this.isLoading = false;\n    },\n    switchAuthMode() {\n      if (this.mode === 'login') {\n        this.mode = 'signup';\n      } else {\n        this.mode = 'login';\n      }\n    },\n    handleError() {\n      this.error = null;\n    },\n  },\n};\n</script>\n\n<style scoped>\nform {\n  margin: 1rem;\n  padding: 1rem;\n}\n\n.form-control {\n  margin: 0.5rem 0;\n}\n\nlabel {\n  font-weight: bold;\n  margin-bottom: 0.5rem;\n  display: block;\n}\n\ninput,\ntextarea {\n  display: block;\n  width: 100%;\n  font: inherit;\n  border: 1px solid #ccc;\n  padding: 0.15rem;\n}\n\ninput:focus,\ntextarea:focus {\n  border-color: #3d008d;\n  background-color: #faf6ff;\n  outline: none;\n}\n</style>"]}]}