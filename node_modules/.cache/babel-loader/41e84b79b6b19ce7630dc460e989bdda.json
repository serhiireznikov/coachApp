{"remainingRequest":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/babel-loader/lib/index.js!/Users/serhiirez/Downloads/auth-11-finished/node_modules/eslint-loader/index.js??ref--14-0!/Users/serhiirez/Downloads/auth-11-finished/src/store/modules/requests/actions.js","dependencies":[{"path":"/Users/serhiirez/Downloads/auth-11-finished/src/store/modules/requests/actions.js","mtime":1674479986193},{"path":"/Users/serhiirez/Downloads/auth-11-finished/babel.config.js","mtime":1598437344000},{"path":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGFzeW5jIGNvbnRhY3RDb2FjaChjb250ZXh0LCBwYXlsb2FkKSB7CiAgICBjb25zdCBuZXdSZXF1ZXN0ID0gewogICAgICB1c2VyRW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgIG1lc3NhZ2U6IHBheWxvYWQubWVzc2FnZQogICAgfTsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vY29hY2gtYXBwLTJiNjI4LWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbS9yZXF1ZXN0cy8ke3BheWxvYWQuY29hY2hJZH0uanNvbmAsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG5ld1JlcXVlc3QpCiAgICB9KTsKICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IocmVzcG9uc2VEYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBzZW5kIHJlcXVlc3QuJyk7CiAgICAgIHRocm93IGVycm9yOwogICAgfQogICAgbmV3UmVxdWVzdC5pZCA9IHJlc3BvbnNlRGF0YS5uYW1lOwogICAgbmV3UmVxdWVzdC5jb2FjaElkID0gcGF5bG9hZC5jb2FjaElkOwogICAgY29udGV4dC5jb21taXQoJ2FkZFJlcXVlc3QnLCBuZXdSZXF1ZXN0KTsKICB9LAogIGFzeW5jIGZldGNoUmVxdWVzdHMoY29udGV4dCkgewogICAgY29uc3QgY29hY2hJZCA9IGNvbnRleHQucm9vdEdldHRlcnMudXNlcklkOwogICAgY29uc3QgdG9rZW4gPSBjb250ZXh0LnJvb3RHZXR0ZXJzLnRva2VuOwogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9jb2FjaC1hcHAtMmI2MjgtZGVmYXVsdC1ydGRiLmZpcmViYXNlaW8uY29tL3JlcXVlc3RzLyR7Y29hY2hJZH0uanNvbj9hdXRoPWAgKyB0b2tlbik7CiAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKHJlc3BvbnNlRGF0YS5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gZmV0Y2ggcmVxdWVzdHMuJyk7CiAgICAgIHRocm93IGVycm9yOwogICAgfQogICAgY29uc3QgcmVxdWVzdHMgPSBbXTsKICAgIGZvciAoY29uc3Qga2V5IGluIHJlc3BvbnNlRGF0YSkgewogICAgICBjb25zdCByZXF1ZXN0ID0gewogICAgICAgIGlkOiBrZXksCiAgICAgICAgY29hY2hJZDogY29hY2hJZCwKICAgICAgICB1c2VyRW1haWw6IHJlc3BvbnNlRGF0YVtrZXldLnVzZXJFbWFpbCwKICAgICAgICBtZXNzYWdlOiByZXNwb25zZURhdGFba2V5XS5tZXNzYWdlCiAgICAgIH07CiAgICAgIHJlcXVlc3RzLnB1c2gocmVxdWVzdCk7CiAgICB9CiAgICBjb250ZXh0LmNvbW1pdCgnc2V0UmVxdWVzdHMnLCByZXF1ZXN0cyk7CiAgfQp9Ow=="},{"version":3,"names":["contactCoach","context","payload","newRequest","userEmail","email","message","response","fetch","coachId","method","body","JSON","stringify","responseData","json","ok","error","Error","id","name","commit","fetchRequests","rootGetters","userId","token","requests","key","request","push"],"sources":["/Users/serhiirez/Downloads/auth-11-finished/src/store/modules/requests/actions.js"],"sourcesContent":["export default {\n  async contactCoach(context, payload) {\n    const newRequest = {\n      userEmail: payload.email,\n      message: payload.message\n    };\n    const response = await fetch(\n      `https://coach-app-2b628-default-rtdb.firebaseio.com/requests/${payload.coachId}.json`,\n      {\n        method: 'POST',\n        body: JSON.stringify(newRequest)\n      }\n    );\n\n    const responseData = await response.json();\n\n    if (!response.ok) {\n      const error = new Error(\n        responseData.message || 'Failed to send request.'\n      );\n      throw error;\n    }\n\n    newRequest.id = responseData.name;\n    newRequest.coachId = payload.coachId;\n\n    context.commit('addRequest', newRequest);\n  },\n  async fetchRequests(context) {\n    const coachId = context.rootGetters.userId;\n    const token = context.rootGetters.token;\n    const response = await fetch(\n      `https://coach-app-2b628-default-rtdb.firebaseio.com/requests/${coachId}.json?auth=` +\n        token\n    );\n    const responseData = await response.json();\n\n    if (!response.ok) {\n      const error = new Error(\n        responseData.message || 'Failed to fetch requests.'\n      );\n      throw error;\n    }\n\n    const requests = [];\n\n    for (const key in responseData) {\n      const request = {\n        id: key,\n        coachId: coachId,\n        userEmail: responseData[key].userEmail,\n        message: responseData[key].message\n      };\n      requests.push(request);\n    }\n\n    context.commit('setRequests', requests);\n  }\n};\n"],"mappings":";;AAAA,eAAe;EACb,MAAMA,YAAY,CAACC,OAAO,EAAEC,OAAO,EAAE;IACnC,MAAMC,UAAU,GAAG;MACjBC,SAAS,EAAEF,OAAO,CAACG,KAAK;MACxBC,OAAO,EAAEJ,OAAO,CAACI;IACnB,CAAC;IACD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CACzB,gEAA+DN,OAAO,CAACO,OAAQ,OAAM,EACtF;MACEC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACV,UAAU;IACjC,CAAC,CACF;IAED,MAAMW,YAAY,GAAG,MAAMP,QAAQ,CAACQ,IAAI,EAAE;IAE1C,IAAI,CAACR,QAAQ,CAACS,EAAE,EAAE;MAChB,MAAMC,KAAK,GAAG,IAAIC,KAAK,CACrBJ,YAAY,CAACR,OAAO,IAAI,yBAAyB,CAClD;MACD,MAAMW,KAAK;IACb;IAEAd,UAAU,CAACgB,EAAE,GAAGL,YAAY,CAACM,IAAI;IACjCjB,UAAU,CAACM,OAAO,GAAGP,OAAO,CAACO,OAAO;IAEpCR,OAAO,CAACoB,MAAM,CAAC,YAAY,EAAElB,UAAU,CAAC;EAC1C,CAAC;EACD,MAAMmB,aAAa,CAACrB,OAAO,EAAE;IAC3B,MAAMQ,OAAO,GAAGR,OAAO,CAACsB,WAAW,CAACC,MAAM;IAC1C,MAAMC,KAAK,GAAGxB,OAAO,CAACsB,WAAW,CAACE,KAAK;IACvC,MAAMlB,QAAQ,GAAG,MAAMC,KAAK,CACzB,gEAA+DC,OAAQ,aAAY,GAClFgB,KAAK,CACR;IACD,MAAMX,YAAY,GAAG,MAAMP,QAAQ,CAACQ,IAAI,EAAE;IAE1C,IAAI,CAACR,QAAQ,CAACS,EAAE,EAAE;MAChB,MAAMC,KAAK,GAAG,IAAIC,KAAK,CACrBJ,YAAY,CAACR,OAAO,IAAI,2BAA2B,CACpD;MACD,MAAMW,KAAK;IACb;IAEA,MAAMS,QAAQ,GAAG,EAAE;IAEnB,KAAK,MAAMC,GAAG,IAAIb,YAAY,EAAE;MAC9B,MAAMc,OAAO,GAAG;QACdT,EAAE,EAAEQ,GAAG;QACPlB,OAAO,EAAEA,OAAO;QAChBL,SAAS,EAAEU,YAAY,CAACa,GAAG,CAAC,CAACvB,SAAS;QACtCE,OAAO,EAAEQ,YAAY,CAACa,GAAG,CAAC,CAACrB;MAC7B,CAAC;MACDoB,QAAQ,CAACG,IAAI,CAACD,OAAO,CAAC;IACxB;IAEA3B,OAAO,CAACoB,MAAM,CAAC,aAAa,EAAEK,QAAQ,CAAC;EACzC;AACF,CAAC"}]}