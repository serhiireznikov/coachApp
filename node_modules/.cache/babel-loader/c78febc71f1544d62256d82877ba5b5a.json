{"remainingRequest":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/babel-loader/lib/index.js!/Users/serhiirez/Downloads/auth-11-finished/node_modules/eslint-loader/index.js??ref--14-0!/Users/serhiirez/Downloads/auth-11-finished/src/store/modules/coaches/actions.js","dependencies":[{"path":"/Users/serhiirez/Downloads/auth-11-finished/src/store/modules/coaches/actions.js","mtime":1674485777903},{"path":"/Users/serhiirez/Downloads/auth-11-finished/babel.config.js","mtime":1598437344000},{"path":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/serhiirez/Downloads/auth-11-finished/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGFzeW5jIHJlZ2lzdGVyQ29hY2goY29udGV4dCwgZGF0YSkgewogICAgY29uc3QgdXNlcklkID0gY29udGV4dC5yb290R2V0dGVycy51c2VySWQ7CiAgICBjb25zdCBjb2FjaERhdGEgPSB7CiAgICAgIGZpcnN0TmFtZTogZGF0YS5maXJzdCwKICAgICAgbGFzdE5hbWU6IGRhdGEubGFzdCwKICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzYywKICAgICAgaG91cmx5UmF0ZTogZGF0YS5yYXRlLAogICAgICBhcmVhczogZGF0YS5hcmVhcwogICAgfTsKICAgIGNvbnN0IHRva2VuID0gY29udGV4dC5yb290R2V0dGVycy50b2tlbjsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vY29hY2gtYXBwLTJiNjI4LWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbS9jb2FjaGVzLyR7dXNlcklkfS5qc29uP2F1dGg9YCArIHRva2VuLCB7CiAgICAgIG1ldGhvZDogJ1BVVCcsCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNvYWNoRGF0YSkKICAgIH0pOwoKICAgIC8vIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKCiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgIC8vIGVycm9yIC4uLgogICAgfQogICAgY29udGV4dC5jb21taXQoJ3JlZ2lzdGVyQ29hY2gnLCB7CiAgICAgIC4uLmNvYWNoRGF0YSwKICAgICAgaWQ6IHVzZXJJZAogICAgfSk7CiAgfSwKICBhc3luYyBsb2FkQ29hY2hlcyhjb250ZXh0LCBwYXlsb2FkKSB7CiAgICBpZiAoIXBheWxvYWQuZm9yY2VSZWZyZXNoICYmICFjb250ZXh0LmdldHRlcnMuc2hvdWxkVXBkYXRlKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vY29hY2gtYXBwLTJiNjI4LWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbS9jb2FjaGVzLmpzb25gKTsKICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IocmVzcG9uc2VEYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBmZXRjaCEnKTsKICAgICAgdGhyb3cgZXJyb3I7CiAgICB9CiAgICBjb25zdCBjb2FjaGVzID0gW107CiAgICBmb3IgKGNvbnN0IGtleSBpbiByZXNwb25zZURhdGEpIHsKICAgICAgY29uc3QgY29hY2ggPSB7CiAgICAgICAgaWQ6IGtleSwKICAgICAgICBmaXJzdE5hbWU6IHJlc3BvbnNlRGF0YVtrZXldLmZpcnN0TmFtZSwKICAgICAgICBsYXN0TmFtZTogcmVzcG9uc2VEYXRhW2tleV0ubGFzdE5hbWUsCiAgICAgICAgZGVzY3JpcHRpb246IHJlc3BvbnNlRGF0YVtrZXldLmRlc2NyaXB0aW9uLAogICAgICAgIGhvdXJseVJhdGU6IHJlc3BvbnNlRGF0YVtrZXldLmhvdXJseVJhdGUsCiAgICAgICAgYXJlYXM6IHJlc3BvbnNlRGF0YVtrZXldLmFyZWFzCiAgICAgIH07CiAgICAgIGNvYWNoZXMucHVzaChjb2FjaCk7CiAgICB9CiAgICBjb250ZXh0LmNvbW1pdCgnc2V0Q29hY2hlcycsIGNvYWNoZXMpOwogICAgY29udGV4dC5jb21taXQoJ3NldEZldGNoVGltZXN0YW1wJyk7CiAgfQp9Ow=="},{"version":3,"names":["registerCoach","context","data","userId","rootGetters","coachData","firstName","first","lastName","last","description","desc","hourlyRate","rate","areas","token","response","fetch","method","body","JSON","stringify","ok","commit","id","loadCoaches","payload","forceRefresh","getters","shouldUpdate","responseData","json","error","Error","message","coaches","key","coach","push"],"sources":["/Users/serhiirez/Downloads/auth-11-finished/src/store/modules/coaches/actions.js"],"sourcesContent":["export default {\n  async registerCoach(context, data) {\n    const userId = context.rootGetters.userId;\n    const coachData = {\n      firstName: data.first,\n      lastName: data.last,\n      description: data.desc,\n      hourlyRate: data.rate,\n      areas: data.areas\n    };\n\n    const token = context.rootGetters.token;\n\n    const response = await fetch(\n      `https://coach-app-2b628-default-rtdb.firebaseio.com/coaches/${userId}.json?auth=` +\n        token,\n      {\n        method: 'PUT',\n        body: JSON.stringify(coachData)\n      }\n    );\n\n    // const responseData = await response.json();\n\n    if (!response.ok) {\n      // error ...\n    }\n\n    context.commit('registerCoach', {\n      ...coachData,\n      id: userId\n    });\n  },\n  async loadCoaches(context, payload) {\n    if (!payload.forceRefresh && !context.getters.shouldUpdate) {\n      return;\n    }\n\n    const response = await fetch(\n      `https://coach-app-2b628-default-rtdb.firebaseio.com/coaches.json`\n    );\n    const responseData = await response.json();\n\n    if (!response.ok) {\n      const error = new Error(responseData.message || 'Failed to fetch!');\n      throw error;\n    }\n\n    const coaches = [];\n\n    for (const key in responseData) {\n      const coach = {\n        id: key,\n        firstName: responseData[key].firstName,\n        lastName: responseData[key].lastName,\n        description: responseData[key].description,\n        hourlyRate: responseData[key].hourlyRate,\n        areas: responseData[key].areas\n      };\n      coaches.push(coach);\n    }\n\n    context.commit('setCoaches', coaches);\n    context.commit('setFetchTimestamp');\n  }\n};\n"],"mappings":";;AAAA,eAAe;EACb,MAAMA,aAAa,CAACC,OAAO,EAAEC,IAAI,EAAE;IACjC,MAAMC,MAAM,GAAGF,OAAO,CAACG,WAAW,CAACD,MAAM;IACzC,MAAME,SAAS,GAAG;MAChBC,SAAS,EAAEJ,IAAI,CAACK,KAAK;MACrBC,QAAQ,EAAEN,IAAI,CAACO,IAAI;MACnBC,WAAW,EAAER,IAAI,CAACS,IAAI;MACtBC,UAAU,EAAEV,IAAI,CAACW,IAAI;MACrBC,KAAK,EAAEZ,IAAI,CAACY;IACd,CAAC;IAED,MAAMC,KAAK,GAAGd,OAAO,CAACG,WAAW,CAACW,KAAK;IAEvC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CACzB,+DAA8Dd,MAAO,aAAY,GAChFY,KAAK,EACP;MACEG,MAAM,EAAE,KAAK;MACbC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAChB,SAAS;IAChC,CAAC,CACF;;IAED;;IAEA,IAAI,CAACW,QAAQ,CAACM,EAAE,EAAE;MAChB;IAAA;IAGFrB,OAAO,CAACsB,MAAM,CAAC,eAAe,EAAE;MAC9B,GAAGlB,SAAS;MACZmB,EAAE,EAAErB;IACN,CAAC,CAAC;EACJ,CAAC;EACD,MAAMsB,WAAW,CAACxB,OAAO,EAAEyB,OAAO,EAAE;IAClC,IAAI,CAACA,OAAO,CAACC,YAAY,IAAI,CAAC1B,OAAO,CAAC2B,OAAO,CAACC,YAAY,EAAE;MAC1D;IACF;IAEA,MAAMb,QAAQ,GAAG,MAAMC,KAAK,CACzB,kEAAiE,CACnE;IACD,MAAMa,YAAY,GAAG,MAAMd,QAAQ,CAACe,IAAI,EAAE;IAE1C,IAAI,CAACf,QAAQ,CAACM,EAAE,EAAE;MAChB,MAAMU,KAAK,GAAG,IAAIC,KAAK,CAACH,YAAY,CAACI,OAAO,IAAI,kBAAkB,CAAC;MACnE,MAAMF,KAAK;IACb;IAEA,MAAMG,OAAO,GAAG,EAAE;IAElB,KAAK,MAAMC,GAAG,IAAIN,YAAY,EAAE;MAC9B,MAAMO,KAAK,GAAG;QACZb,EAAE,EAAEY,GAAG;QACP9B,SAAS,EAAEwB,YAAY,CAACM,GAAG,CAAC,CAAC9B,SAAS;QACtCE,QAAQ,EAAEsB,YAAY,CAACM,GAAG,CAAC,CAAC5B,QAAQ;QACpCE,WAAW,EAAEoB,YAAY,CAACM,GAAG,CAAC,CAAC1B,WAAW;QAC1CE,UAAU,EAAEkB,YAAY,CAACM,GAAG,CAAC,CAACxB,UAAU;QACxCE,KAAK,EAAEgB,YAAY,CAACM,GAAG,CAAC,CAACtB;MAC3B,CAAC;MACDqB,OAAO,CAACG,IAAI,CAACD,KAAK,CAAC;IACrB;IAEApC,OAAO,CAACsB,MAAM,CAAC,YAAY,EAAEY,OAAO,CAAC;IACrClC,OAAO,CAACsB,MAAM,CAAC,mBAAmB,CAAC;EACrC;AACF,CAAC"}]}